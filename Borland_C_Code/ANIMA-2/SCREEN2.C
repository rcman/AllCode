// Move an object through an array
// Date Start: Feb 16, 1996
// Rev: Feb 21 - 96
//
//
//
//
//**********************************************************

#include <dos.h>
#include <stdio.h>
#include <stdlib.h>
#include <alloc.h>
#include <memory.h>
#include <string.h>
#include <time.h>
#include <math.h>
// #include <complex.h>

//#include <conio.h>
//#include <graphics.h>


void Init_Mode(void);
void Close_Mode(void);
void getch(void);
void draw_screen(void);
int go_through_the_array(void);
void CutImage(int saveareax, int savesreay, int spritenum);
void PutImage(int spx,int spy, int spritenum );
void RestoreBack(int spx,int spy, int spritenum );
void initarray(void);

//Global

char far *screen = MK_FP(0xa000,0);
char far *destin;

static char myobj[16][16] = {
    { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x28, 0x28, 0x28, 0x00, 0x00, 0x00 },
    { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x28, 0x28, 0x28, 0x28, 0x28, 0x00, 0x00 },
    { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x28, 0x28, 0x28, 0x28, 0x28, 0x28, 0x28, 0x00 },
    { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x28, 0x28, 0x28, 0x28, 0x28, 0x28, 0x28, 0x28, 0x28 },
    { 0x00, 0x00, 0x00, 0x00, 0x00, 0x28, 0x28, 0x28, 0x28, 0x0e, 0x28, 0x28, 0x28, 0x28, 0x28, 0x00 },
    { 0x00, 0x00, 0x0e, 0x0e, 0x28, 0x28, 0x28, 0x28, 0x0e, 0x00, 0x28, 0x28, 0x28, 0x28, 0x28, 0x00 },
    { 0x00, 0x00, 0x00, 0x28, 0x28, 0x28, 0x28, 0x0e, 0x00, 0x00, 0x28, 0x28, 0x28, 0x28, 0x28, 0x00 },
    { 0x00, 0x28, 0x28, 0x28, 0x28, 0x28, 0x0e, 0x00, 0x00, 0x00, 0x28, 0x28, 0x28, 0x28, 0x28, 0x28 },
    { 0x0e, 0x28, 0x28, 0x28, 0x28, 0x0e, 0x0e, 0x0e, 0x0e, 0x0e, 0x28, 0x28, 0x28, 0x28, 0x28, 0x28 },
    { 0x00, 0x28, 0x28, 0x28, 0x28, 0x28, 0x0e, 0x00, 0x00, 0x00, 0x28, 0x28, 0x28, 0x28, 0x28, 0x00 },
    { 0x00, 0x00, 0x00, 0x28, 0x28, 0x28, 0x28, 0x0e, 0x00, 0x00, 0x28, 0x28, 0x28, 0x28, 0x28, 0x00 },
    { 0x00, 0x00, 0x0e, 0x0e, 0x28, 0x28, 0x28, 0x28, 0x0e, 0x00, 0x28, 0x28, 0x28, 0x28, 0x28, 0x00 },
    { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x28, 0x28, 0x28, 0x0e, 0x28, 0x28, 0x28, 0x28, 0x28, 0x28 },
    { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x28, 0x28, 0x28, 0x28, 0x28, 0x28, 0x28, 0x28, 0x00 },
    { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x28, 0x28, 0x28, 0x28, 0x28, 0x28, 0x00, 0x00 },
    { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x28, 0x28, 0x28, 0x28, 0x00, 0x00, 0x00 },


  };



static char screens[12][20] ={
	{ 0x02, 0x02, 0x03, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02,0x02, 0x03, 0x02, 0x02,0x02, 0x02, 0x02, 0x02 },
	{ 0x02, 0x02, 0x03, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02,0x02, 0x03, 0x02, 0x02,0x02, 0x02, 0x02, 0x02 },
	{ 0x02, 0x02, 0x03, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02,0x02, 0x03, 0x02, 0x02,0x02, 0x02, 0x02, 0x02 },
	{ 0x02, 0x02, 0x03, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02,0x02, 0x03, 0x00, 0x00,0x00, 0x00, 0x00, 0x00 },
	{ 0x02, 0x02, 0x03, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02,0x02, 0x02, 0x02, 0x02,0x02, 0x02, 0x02, 0x02 },
	{ 0x00, 0x00, 0x00, 0x00, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02,0x02, 0x02, 0x02, 0x02,0x02, 0x02, 0x02, 0x02 },
	{ 0x02, 0x02, 0x03, 0x00, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02,0x02, 0x02, 0x02, 0x02,0x02, 0x02, 0x02, 0x02 },
	{ 0x02, 0x02, 0x03, 0x00, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x03, 0x00,0x00, 0x00, 0x00, 0x00,0x00, 0x00, 0x00, 0x00 },
	{ 0x02, 0x02, 0x03, 0x00, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x03, 0x02,0x02, 0x02, 0x02, 0x02,0x02, 0x02, 0x02, 0x02 },
	{ 0x02, 0x02, 0x03, 0x00, 0x00, 0x00, 0x02, 0x02, 0x02, 0x02, 0x03, 0x02,0x02, 0x02, 0x02, 0x02,0x02, 0x02, 0x02, 0x02 },
	{ 0x02, 0x02, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0x02,0x02, 0x02, 0x02, 0x02,0x02, 0x02, 0x02, 0x02 },
	{ 0x02, 0x02, 0x03, 0x02, 0x02, 0x02, 0x02, 0x02, 0x03, 0x02, 0x02, 0x02,0x02, 0x02, 0x02, 0x02,0x02, 0x02, 0x02, 0x02 },

	};
					// 16 x 16 array
static char ship1[16][16] = {
    { 0x72, 0x72, 0x06, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72 },
    { 0x72, 0x72, 0x06, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72 },
    { 0x72, 0x72, 0x06, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72 },
    { 0x72, 0x72, 0x06, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72 },
    { 0x72, 0x72, 0x06, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72 },
    { 0x72, 0x72, 0x06, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72 },
    { 0x72, 0x72, 0x06, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72 },
    { 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06 },
    { 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x06, 0x72, 0x72, 0x72, 0x72, 0x72 },
    { 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x06, 0x72, 0x72, 0x72, 0x72, 0x72 },
    { 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x06, 0x72, 0x72, 0x72, 0x72, 0x72 },
    { 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x06, 0x72, 0x72, 0x72, 0x72, 0x72 },
    { 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x06, 0x72, 0x72, 0x72, 0x72, 0x72 },
    { 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x06, 0x72, 0x72, 0x72, 0x72, 0x72 },
    { 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x06, 0x72, 0x72, 0x72, 0x72, 0x72 },
    { 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x06, 0x72, 0x72, 0x72, 0x72, 0x72 },

  };
static char ship2[16][16] = {
    { 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06 },
    { 0x72, 0x72, 0x06, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72 },
    { 0x72, 0x72, 0x06, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72 },
    { 0x72, 0x72, 0x06, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72 },
    { 0x72, 0x72, 0x06, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72 },
    { 0x72, 0x72, 0x06, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72 },
    { 0x72, 0x72, 0x06, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72 },
    { 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06 },    { 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06 },
    { 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x06, 0x72, 0x72, 0x72, 0x72, 0x72 },
    { 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x06, 0x72, 0x72, 0x72, 0x72, 0x72 },
    { 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x06, 0x72, 0x72, 0x72, 0x72, 0x72 },
    { 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x06, 0x72, 0x72, 0x72, 0x72, 0x72 },
    { 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x06, 0x72, 0x72, 0x72, 0x72, 0x72 },
    { 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x72, 0x06, 0x72, 0x72, 0x72, 0x72, 0x72 },
    { 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06 },
	};  // object 2

static char box1[16][16] = {
    { 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01 },
    { 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01 },
    { 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01 },
    { 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01 },
    { 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01 },
    { 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01 },
    { 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01 },
    { 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01 },    { 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06 },
    { 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01 },
    { 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01 },
    { 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01 },
    { 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01 },
    { 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01 },
    { 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x006,0x00, 0x00, 0x00, 0x00, 0x01 },    { 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01 },

    };  // object 2

static char stair[16][16] = {
    { 0x00, 0x0e, 0x0e, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0e, 0x0e, 0x00 },
    { 0x00, 0x0e, 0x0e, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0e, 0x0e, 0x00 },
    { 0x00, 0x0e, 0x0e, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0e, 0x0e, 0x00 },
    { 0x00, 0x0e, 0x0e, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0e, 0x0e, 0x00 },
    { 0x00, 0x0e, 0x0e, 0x0e, 0x0e, 0x0e, 0x0e, 0x0e, 0x0e, 0x0e, 0x0e, 0x0e, 0x0e, 0x0e, 0x0e, 0x00 },
    { 0x00, 0x0e, 0x0e, 0x0e, 0x0e, 0x0e, 0x0e, 0x0e, 0x0e, 0x0e, 0x0e, 0x0e, 0x0e, 0x0e, 0x0e, 0x00 },
    { 0x00, 0x0e, 0x0e, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0e, 0x0e, 0x00 },
    { 0x00, 0x0e, 0x0e, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0e, 0x0e, 0x00 },
    { 0x00, 0x0e, 0x0e, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0e, 0x0e, 0x00 },
    { 0x00, 0x0e, 0x0e, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0e, 0x0e, 0x00 },
    { 0x00, 0x0e, 0x0e, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0e, 0x0e, 0x00 },
    { 0x00, 0x0e, 0x0e, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0e, 0x0e, 0x00 },
    { 0x00, 0x0e, 0x0e, 0x0e, 0x0e, 0x0e, 0x0e, 0x0e, 0x0e, 0x0e, 0x0e, 0x0e, 0x0e, 0x0e, 0x0e, 0x00 },
    { 0x00, 0x0e, 0x0e, 0x0e, 0x0e, 0x0e, 0x0e, 0x0e, 0x0e, 0x0e, 0x0e, 0x0e, 0x0e, 0x0e, 0x0e, 0x00 },
    { 0x00, 0x0e, 0x0e, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0e, 0x0e, 0x00 },
    { 0x00, 0x0e, 0x0e, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0e, 0x0e, 0x00 },
	};    // object 3

void *buffer;
void *image;
unsigned int imsize;
int top = 290;
int bottom = 35;
int rbottom = 300;
int lbottom = 145;
int spx=0;            // Pixels
int spy=0;
int ospx=0;            // Pixels
int ospy=0;
int spritenum=0;
int lp;
int x,y,xy1,xy,fl,tm,s,t,l;
int z=0;
int offset = 0;
int numspr=10;
int ap=0;
int dn=0;
int cnt=0;
int blx=0;
int bly=0;
int temp1=0;
int temp2=0;
int temp3=0;
int temp4=0;
int flg=0;
int check=0;
int blockval=0;
int shot=0;

int below;
int above;
int infront;


struct ship {
		int shipox;
		int shipoy;
		int shipx;
		int shipy;
		int shipspeed;
		int xcor;
		int ycor;
		int oxcor;
		int oycor;
		char far *saveback;

	 } shipanim[40];



void initarray(void)
{


	int c,sn;

	destin = (char far  *) farmalloc(64000);
	memset(destin, 0, 64000);

	if (destin == NULL)
		{
		     printf("Not enough memory to allocate screen buffer\n");
			 exit(1);  /* terminate program if out of memory */
		}


}




void main()
{

		 //	spx = (5*16)*320;
	spy = 80;			//SET VERTICAL HERE FOR NOW
	spx = 0;

	shipanim[0].ycor = spy;			//SET VERTICAL HERE FOR NOW
	shipanim[0].xcor = spx;
	shipanim[0].oycor = spy;			//SET VERTICAL HERE FOR NOW
	shipanim[0].oxcor = spx;

	Init_Mode();
   getch();
	draw_screen();

	PutImage(spx,spy,0);

	for (l=0;l<150;l++)
	{
		go_through_the_array();
		spy = shipanim[0].ycor;			//SET VERTICAL HERE FOR NOW
		spx = shipanim[0].xcor;


		PutImage(spx,spy,0);
		PutImage(shipanim[0].oxcor,shipanim[0].oycor,0);
		shipanim[0].oycor = spy;			//SET VERTICAL HERE FOR NOW
		shipanim[0].oxcor = spx;
		delay(2);

	}
	getch();
	Close_Mode();

	printf("%d %d", shipanim[0].shipox,shipanim[1].shipox );
	if (shot==1)
		printf("close\n");


	}






void Init_Mode(void)
{
	asm {
		mov ax,0x13
		int 0x10
		}
}

void Close_Mode()
{

	asm {
		mov ax,0x03
		int 0x10
		}

}





void draw_screen()
{
	int ap=0;
	int dn=0;
	int cnt=0;

	for (t=0;t<12;t++)
	{
		for (s=0;s<20;s++)
		{
			if (screens[t][s]==1)
			{
				for (x=0;x<16;x++)
				{
					for (y=0;y<16;y++)
					{
					*(screen+y+offset+ap+dn)=ship1[x][y];
					}
					offset = offset + 320;      //bytes to next line
				}
				offset = 0;
				ap = ap +16;
				//getch();
			}
			if (screens[t][s]==2)
			{
				for (x=0;x<16;x++)
				{
					for (y=0;y<16;y++)
					{
					*(screen+y+offset+ap+dn)=ship2[x][y];
					}
				offset = offset + 320;      //bytes to next line
				}
				offset = 0;
				ap = ap + 16;
			       //       getch();
			}

			if (screens[t][s]==3)
			 {
				 for (x=0;x<16;x++)
				{
					 for (y=0;y<16;y++)
					{
					*(screen+y+offset+ap+dn)=stair[x][y];
					}
					 offset = offset + 320;      //bytes to next line
				 }
				 offset = 0;
				 ap = ap +16;
				 //getch();
			 }
			if (screens[t][s]==0)
			 {
				 for (x=0;x<16;x++)
				{
					 for (y=0;y<16;y++)
					{
					*(screen+y+offset+ap+dn)=0;
					}
					 offset = offset + 320;      //bytes to next line
				 }
				 offset = 0;
				 ap = ap +16;
				 //getch();
			 }



		}
		cnt = cnt + 15;
		dn = cnt * 320;
		offset=0;

	}
}

int go_through_the_array(void)

{

	// whats in the array
	// the block that I'm on and the one in front of me
	// above me and below me
	// that is 16 * the block number for the width
	// and there are 20 blocks accross and 12 down
	//	spx = 4*16*320; // start at 0 and count 4 down the 5th
	//	spy = 16; 	block is where its drawn
	//	spx = 20480


	int ap=0;
	int dn=0;
	int cnt=0;
	int test;

	offset = 0;

	for (t=0;t<12;t++)
	{
		for (s=0;s<20;s++)
		{
			temp2 = (s*16)+((t*16)*320);			// the screen box
			temp3 = temp2+(8*320+8)    ;   			//CENTRE of screen box 16 x 16
			temp4 = ((((shipanim[0].ycor/16)*16)*320))+((shipanim[0].xcor)+(8*320+8));   // centre of my object
			offset = 0;
			test =  shipanim[0].xcor;
			ap = ap +16;
			temp1 = temp4 - temp3;

			if (temp1 <= 0)
				temp1 = temp1 * -1;            // see how close they are




		if (temp1 < 16 ) 	// WHERE SHIP IS compared to block
			{
				if (t==0)						// Most left hand side
					above=screens[t][s];
				else
				{
					above=screens[t-1][s]; 		 // temp2 = (s*16)+((t-1*16)*320);   // ABOVE
					infront=screens[t][s+1];	 // temp2 = (s+1*16)+((t*16)*320);   // IN FRONT
					below=screens[t+1][s];		// temp2 = (s*16)+((t+1*16)*320);   // BELOW
				}


				if (below==0)
				{
					spy = shipanim[0].ycor;
					spy = spy + 1;
					shipanim[0].ycor = spy;			//SET VERTICAL HERE FOR NOW
				}
				else
				if (infront==0)				//SET VERTICAL HERE FOR NOW
				{
					spx = shipanim[0].xcor;
					spx = spx + 1;
					shipanim[0].xcor = spx;			//SET VERTICAL HERE FOR NOW
				}

				t=13;
				s=21;

			}


		}   // FOR T
		cnt = cnt + 15;
		dn = cnt * 320;
		offset=0;

	}



}



void CutImage(int spx,int spy, int spritenum)
{
	int i=0;
	offset=spy*320+spx;

	for (x=0;x<16;x++)
	{
		for (y=0;y<16;y++)
		{
			*(shipanim[spritenum].saveback+i)=*(screen+y+offset);
			i++;
		}
		offset = offset + 320;      //bytes to next line
	}


}


void PutImage(int spx,int spy,int spritenum)
{
	offset=(spy*1)*320+spx;

	for (x=0;x<16;x++)
	{
		for (y=0;y<16;y++)
		{
		  *(screen+y+offset)^=myobj[x][y];
		}
		offset = offset + 320;      //bytes to next line
	}
	shipanim[0].shipox = spy*320+spx; ;
//	shipanim[1].shipox = spy*320+spx; ;

}


void RestoreBack(int spx,int spy, int spritenum)
{
	int i=0;
	offset=spy*320+spx;

	for (x=0;x<16;x++)
	{
		for (y=0;y<16;y++)
		{
			 *(screen+y+offset)=*(shipanim[spritenum].saveback+i);
			i++;
		}
		offset = offset + 320;      //bytes to next line
	}

}

